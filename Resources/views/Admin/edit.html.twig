{% extends "::admin.html.twig" %}

{% if page is not defined %}
  {% if form is defined %}
    {% set page = form.vars.value %}
  {% endif %}
{% endif %}

{% block title %}Редактирование CMS страницы{% endblock title %}

{% block content %}
  <h1>Редактирование CMS страницы</h1>
  {{ form_errors(form) }}
  <form action="{{ action_path }}" method="post" {{ form_enctype(form) }} onsubmit="window.onbeforeunload = null;">
  {{ form_row(form._token) }}
    <div class="row">
      <div class="col-lg-12">
        {{ form_row(form.title) }}
        {{ form_row(form.url) }}
      </div>

      <div class="col-lg-12">
        {{ form_row(form.metatags) }}
      </div>

      <div class="col-lg-12">
        {{ form_row(form.content) }}
      </div>
    </div>
    
    <div>
      {{ form_rest(form) }}

      <hr>
      <br/>
      <input type="submit" value="Сохранить" class="btn btn-primary" />
      {% if (form.vars.value.id) %}
      <a href="{{ path('admin_cms_page_show', {id: page.id}) }}">Отмена</a>
      {% endif %}
    </div>

  </form>
{% endblock content %}

{% block stylesheets %}
  {% include '@partials/redactor_assets.css.twig' %}
{% endblock stylesheets %}


{% block javascripts %}
  {% include '@partials/redactor_assets.html.twig' %}
  <script type="text/javascript">
    $(function () {
      window.onbeforeunload = function() {
        return "Вы потеряете данные, которые не были сохранены.";
      };

      VolunteerPostBundle.initRedactorFor('cms_page_content');
    });
  </script>
{% endblock javascripts %}

{% block admin_cms_page_index_active %}active{% endblock %}
